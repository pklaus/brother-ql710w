# Maintainer:  Philipp Klaus <philipp.l.klaus@web.de>
pkgname=brother-ql710w-cupswrapper
pkgver=1.0.2
pkgrel=0
pkgdesc="LPR-to-CUPS wrapper for Brother P-Touch QL-710W labelprinter (metric)"
url="http://solutions.brother.com/linux/en_us/"
arch=('i686' 'x86_64')
license=("GPL2")
if [ $CARCH == "x86_64" ]; then
depends=('cups' 'ghostscript' 'lib32-glibc' 'brother-ql710w-lpr')
else
depends=('cups' 'ghostscript' 'glibc' 'brother-ql710w-lpr')
fi
makedepends=('rpmextract' 'cpio')
source=("http://download.brother.com/welcome/dlfp002199/ql710wcupswrapper-$pkgver-0.i386.rpm")
md5sums=('b4e50edb35da907c7b6d201ebf5242df')
noextract=("ql710wcupswrapper-$pkgver-0.i386.rpm")
install='cupswrapper.install'

build() {
        cd $srcdir
        rpmextract.sh "ql710wcupswrapper-$pkgver-0.i386.rpm"

        rm -f "ql710wcupswrapper-$pkgver-0.i386.rpm"

        mkdir -p usr/share/ || return 1
        mv opt/brother usr/share/brother || return 1
        rmdir opt || return 1

        sed -i 's|/opt/brother|/usr/share/brother|g' `grep -lr '/opt/brother' ./` || return 1
}

package() {
        mv usr $pkgdir/. || return 1
}
